#Made by GachaCounterfit
#Copyright 2020

#Imports
import random
import urllib.request
import urllib.parse

#Functions
def createlevelvar(level):
	if level < 201 and level > 0:
		lvltable = [
			0,100,250,450,700,1000,1350,1750,2200,2700,3250,3850,4500,5200,5950,6750,7600,8500,9450,
			10450,11500,12600,13750,14950,16200,17500,18900,20400,22000,23700,25500,27400,29400,31500,
			33700,36000,38400,40900,43500,46200,49000,51900,54900,58000,61200,64500,67900,71400,75000,
			78700,82500,86550,90850,95400,100200,105250,110550,116100,121900,127950,134250,140800,
			147600,154650,161950,169500,177300,185350,193650,202200,211000,220050,229350,238900,248700,
			258750,269300,280350,291900,303950,316500,329550,343100,357150,371700,386750,402300,418350,
			434900,451950,469500,487550,506100,525150,544700,564750,585300,606350,627900,649950,672500,
			696050,720600,746150,772700,800250,828800,858350,888900,920450,953000,986550,1021100,1056650,
			1093200,1130750,1169300,1208850,1249400,1290950,1333500,1377050,1421600,1467150,1513700,1561250,
			1609800,1659350,1709900,1761450,1814000,1867550,1922100,1977650,2034200,2091750,2150300,2209850,
			2270400,2331950,2394500,2458050,2522600,2588150,2654700,2722250,2790800,2860350,2930900,3002450,
			3075000,3149550,3226100,3304650,3385200,3467750,3552300,3638850,3727400,3817950,3910500,4005050,
			4101600,4200150,4300700,4403250,4507800,4614350,4722900,4833450,4946000,5060550,5177100,5295650,5416200,5538750,
			5663300,5789850,5918400,6048950,6181500,6316050,6452600,6591150,6731700,6874250,7018800,7165350,7313900,7464450,
			7617000,7771550,7928100,8086650,8247200,8409750,8574300,8740850,8909400,9079950
		]
		return lvltable[level-1]
	else:
		return 0

def main():
	gems = int(input("Gems: "))
	gold = int(input("Gold: "))
	level = int(input("Level: "))
	osaveid = input("Save Code: ")
	if level < 201 and level > 0:
		downloaddata = "accountx={}&systemCall=checkLogin".format(osaveid)
		downloadreq = urllib.request.Request("https://lunime.com/gachaclub/gclubdata/club_login.php",downloaddata.encode("utf-8"))
		downloadreq.add_header("User-Agent","Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; rv:11.0) like Gecko")
		downloadreq.add_header("Pragma","no-cache")
		downloadreq.add_header("Accept","*/*")
		print("Downloading save data...")
		resraw = urllib.request.urlopen(downloadreq).read().decode("utf-8")
		if not "systemResult=3" in resraw:
			print("Finished downloading, constructing payload...")
			res = resraw.split("&")
			res.pop(0)
			res.pop(0)
			for i in range(len(res)):
				reseq = res[i].split("=")
				reseq.pop(0)
				reseqstr = "=".join(reseq)
				res[i] = urllib.parse.unquote(reseqstr).split("|")
			res[2][0] = gems
			res[2][1] = gold
			res[0][13] = createlevelvar(level)
			i = 1
			savecode = random.randint(100000000,999999999)
			uploaddata = "accountx={}".format(savecode)
			for v in res:
				uploaddata += "&datastring{}={}".format(i,"|".join(str(vv) for vv in v))
				i += 1
			uploadreq = urllib.request.Request("https://lunime.com/gachaclub/gclubdata/club_register.php",uploaddata.encode("utf-8"))
			uploadreq.add_header("User-Agent","Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; rv:11.0) like Gecko")
			uploadreq.add_header("Pragma","no-cache")
			uploadreq.add_header("Accept","*/*")
			print("Uploading payload...")
			urllib.request.urlopen(uploadreq)
			print("Upload complete. Save code: {}".format(savecode))
		else:
			print("Invalid save code.")
	else:
		print("Invalid level amount.")

#Main
if __name__ == "__main__":
	main()